{
  "entities": {
    "Wod": {
      "title": "Wod",
      "type": "object",
      "description": "Represents a Workout of the Day (WOD).",
      "properties": {
        "date": {
          "type": "string",
          "description": "The date for which this WOD is scheduled in YYYY-MM-DD format.",
          "format": "date"
        },
        "title": {
          "type": "string",
          "description": "Title of the WOD (e.g., 'Strength and Metcon')."
        },
        "intro": {
            "type": "array",
            "items": {
                "type": "string"
            },
            "description": "Introductory notes for the WOD."
        },
        "sections": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "title": {"type": "string"},
                    "content": {"type": "string"},
                    "type": {"type": "string", "enum": ["metcon"]},
                    "levels": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "name": {"type": "string"},
                                "content": {"type": "string"}
                            }
                        }
                    }
                }
            },
            "description": "The different sections of the workout."
        },
        "coachId": {
          "type": "string",
          "description": "The UID of the coach who created this WOD."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the WOD was created."
        },
        "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the WOD was last updated."
        }
      },
      "required": [
        "date",
        "title",
        "sections",
        "coachId"
      ]
    },
    "Coach": {
      "title": "Coach",
      "type": "object",
      "description": "Represents a Coach user profile.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The unique Firebase Authentication UID of the coach."
        },
        "name": {
          "type": "string",
          "description": "Name of the coach."
        },
        "email": {
          "type": "string",
          "description": "Email address of the coach.",
          "format": "email"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the coach profile was created."
        }
      },
      "required": [
        "uid",
        "name",
        "email"
      ]
    },
    "CoachRole": {
        "title": "CoachRole",
        "type": "object",
        "description": "A document indicating that a user has a 'coach' role. The document ID is the user's UID.",
        "properties": {
           "createdAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the role was assigned."
            }
        }
    }
  },
  "auth": {
    "providers": [
      "password"
    ]
  },
  "firestore": {
    "/wods/{wodId}": {
        "schema": { "$ref": "#/entities/Wod" },
        "description": "Stores all WOD documents in a single root collection."
    },
    "/coaches/{coachId}": {
        "schema": { "$ref": "#/entities/Coach" },
        "description": "Stores public profiles for all coaches. The document ID is the coach's UID."
    },
    "/roles_coach/{uid}": {
        "schema": { "$ref": "#/entities/CoachRole" },
        "description": "A private collection where the existence of a document '/roles_coach/{uid}' grants the user with that UID the role of 'coach'."
    }
  }
}
